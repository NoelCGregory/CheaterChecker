(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{192:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},355:function(e,t){},357:function(e,t){},366:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(41),c=n.n(r),i=(n(225),n(35)),o=n(36),l=n(38),u=n(37),d=(n(226),n(148),n(42)),j=n(34),h=n(15),p=n.n(h),m=n(22),b=n(71),x=(n(227),b.a.initializeApp({apiKey:"AIzaSyDGQEeY4WAxVnkEc8g8Yvx-OhveqaDseK8",authDomain:"cheaterchecker-202ee.firebaseapp.com",projectId:"cheaterchecker-202ee",storageBucket:"cheaterchecker-202ee.appspot.com",messagingSenderId:"910367486585",appId:"1:910367486585:web:1d47256801e71b1a535aa8",measurementId:"G-XSK9QN5PJM"})),f=b.a.firestore(),O=n(371),v=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.collection("users").doc(t),e.next=3,n.get();case 3:if(e.sent.exists){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.collection("users").doc(t),(s={role:null}).role=!!n,e.next=5,a.set(s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.collection("users").doc(n),e.next=3,a.update(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t,n),a=f.collection("classes").doc(t.trim()),e.next=5,a.update({students:b.a.firestore.FieldValue.arrayUnion(n)});case 5:k(t,n),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a,s,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.collection("classes"),s=null,s=1==n?a.where("owner","==",t):a.where("students","array-contains",t),e.next=5,s.get();case 5:return r=e.sent,c=r.docs.map((function(e){return e.data()})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.collection("users").doc(n),e.next=3,a.update({Classes:b.a.firestore.FieldValue.arrayUnion(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.collection("users").doc(t),e.next=3,n.get();case 3:return a=e.sent,s=a.data(),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(e){var t,n,a,s;s=Math.floor(e/1e3),a=Math.floor(s/60),s%=60,n=Math.floor(a/60),a%=60;var r="";return 0!=(t=Math.floor(n/24))&&(r+=t+" days, "),0!=(n%=24)&&(r+=n+" hours, "),0!=a&&(r+=a+" minutes, "),0!=s&&(r+=s+" seconds "),r}var _=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a,s,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.collection("assessment"),a=n.where("classCode","in",t),e.next=4,a.get();case 4:return s=e.sent,r=new Date,c=[],s.docs.map((function(e){var t=e.data();t.assessments.map((function(e){c.push({data:e,class:t.className});var n=new Date(e.date),a=r.getTime()-n.getTime();e.elaspedTime=N(a)}))})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(p.a.mark((function e(t,n,a){var s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.collection("assessment").doc(t),r=(new Date).toString(),e.next=4,s.update({classCode:t,assessments:b.a.firestore.FieldValue.arrayUnion({assessmentObj:n,roomId:a,date:r})});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.collection("assessment").doc(t),e.next=3,n.get();case 3:return a=e.sent,e.abrupt("return",a.data());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.collection("assessment").doc(n),e.next=3,a.update({sockedId:t});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=n(6),U=s.a.createContext(),z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={currentUser:null,loader:!0,status:null,sendUser:!1},e.style={display:"flex",justifyContent:"center",alignItems:"center",height:"75vh"},e.checkUser=Object(m.a)(p.a.mark((function t(){var n,a,s,r,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.currentUser,s=n.sendUser,r=e.props.history,null==a||0!=s){t.next=11;break}return t.next=5,v(a.uid);case 5:c=t.sent,i="",i=c?"/selectrole":"/",s=!0,r.push(i),e.setState({currentUser:a,sendUser:s});case 11:case"end":return t.stop()}}),t)}))),e.getRole=Object(m.a)(p.a.mark((function t(){var n,a,s,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.currentUser,s=n.status,null==a||null!=s){t.next=6;break}return t.next=4,I(a.uid);case 4:r=t.sent,e.setState({status:r});case 6:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;x.auth().onAuthStateChanged((function(t){null!=t?e.setState({currentUser:t,loader:!1,status:null}):e.setState({currentUser:t,loader:!1})}))}},{key:"componentDidUpdate",value:function(){this.checkUser(),this.getRole()}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.loader,a=e.status;return n?Object(D.jsx)("div",{style:this.style,children:Object(D.jsx)(O.a,{size:"large",tip:"Loading..."})}):Object(D.jsx)(U.Provider,{value:{currentUser:t,status:a},children:this.props.children})}}]),n}(a.Component),H=Object(j.f)(z),M=(n(67),n(372)),R=n(374),L=n(373),F=n(376),B=n(213),E=n(377),P=n(379),W=n(380),q=n(381),Y=n(382),G=M.a.Sider,J=E.a.SubMenu,K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).onCollapse=function(e){a.setState({collapsed:e})};var s=!1;return void 0!=a.props.state&&(s=a.props.state),a.state={collapsed:s},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.collapsed;return Object(D.jsxs)(G,{collapsible:!0,collapsed:e,onCollapse:this.onCollapse,children:[e?Object(D.jsx)("img",{className:"logosmall",src:"/logosmall.png"}):Object(D.jsx)("img",{className:"logo",src:"/logo.png"}),Object(D.jsxs)(E.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(D.jsx)(E.a.Item,{icon:Object(D.jsx)(P.a,{}),children:Object(D.jsx)(d.b,{to:{pathname:"/",state:e},children:"Home"})},"1"),Object(D.jsx)(E.a.Item,{icon:Object(D.jsx)(W.a,{}),children:Object(D.jsx)(d.b,{to:{pathname:"/classes",state:e},children:"Classes"})},"2"),Object(D.jsxs)(J,{icon:Object(D.jsx)(q.a,{}),title:"User",children:[Object(D.jsx)(E.a.Item,{children:"Tom"},"3"),Object(D.jsx)(E.a.Item,{children:"Bill"},"4"),Object(D.jsx)(E.a.Item,{children:"Alex"},"5")]},"sub1"),Object(D.jsxs)(J,{icon:Object(D.jsx)(Y.a,{}),title:"Team",children:[Object(D.jsx)(E.a.Item,{children:"Team 1"},"6"),Object(D.jsx)(E.a.Item,{children:"Team 2"},"8")]},"sub2")]})]})}}]),n}(a.Component),X=s.a.memo(K),V=M.a.Footer,Q=function(){return Object(D.jsx)(V,{style:{textAlign:"center"},children:"CheaterChecker \xa92021 Created by Noel Gregory"})},Z=s.a.memo(Q),$=F.a.Search,ee=M.a.Header,te=function(){return Object(D.jsxs)(ee,{className:"site-layout-background",style:{padding:0},children:[" ",Object(D.jsx)($,{className:"search",placeholder:"input search text",enterButton:"Search",size:"large"}),Object(D.jsx)(B.a,{size:"large",style:{float:"right",margin:"10px"},onClick:function(){return x.auth().signOut()},type:"primary",children:"Sign out"})]})},ne=s.a.memo(te),ae=M.a.Content,se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).generateCode=function(){for(var e="qwertyuioplkjhgfdsazxcvbnm1234567890QAZXSWEDCVFRTGBNHYUJMKILOP",t="",n=0;n<5;n++){t+=e[Math.floor(Math.random()*e.length)]}return t},a.getLatestAssesment=Object(m.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.context.status,e.next=3,_(t.Classes);case 3:0==(n=e.sent).length&&(n=!1),console.log(n),a.setState({latest:n});case 7:case"end":return e.stop()}}),e)}))),a.renderLatest=function(e){return 0==e?Object(D.jsx)("h3",{children:"No Latest Assessment"}):(console.log("_________________________________________________"),console.log(e),e.map((function(e,t){return Object(D.jsx)(R.a,{className:"customCard",type:"inner",title:e.class,extra:e.data.elaspedTime,children:e.data.assessmentObj},t)})))},a.addToClass=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.context.currentUser,null==t){e.next=6;break}return e.next=4,w(t.code,n.uid);case 4:void 0!=e.sent&&alert("This Class Does Not Exist");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){a.setState({value:e.target.value})},a.state={latest:void 0},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.context.status,t=this.state.latest;return null!=e&&void 0==t&&this.getLatestAssesment(),Object(D.jsxs)(M.a,{style:{minHeight:"100vh"},children:[Object(D.jsx)(X,{state:this.props.location.state}),Object(D.jsxs)(M.a,{className:"site-layout",children:[Object(D.jsx)(ne,{}),Object(D.jsx)(ae,{style:{margin:"0 16px"},children:Object(D.jsxs)("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:[void 0==t?Object(D.jsx)("div",{className:"loader",children:Object(D.jsx)(O.a,{size:"large",tip:"Loading..."})}):this.renderLatest(t),null!=e?1==e.role?Object(D.jsx)("div",{children:Object(D.jsx)("h3",{children:"Teacher"})}):Object(D.jsxs)("div",{children:[Object(D.jsx)("h3",{children:"Student"}),Object(D.jsxs)(L.a,{onFinish:this.addToClass,name:"dynamic_rule",children:[Object(D.jsx)(L.a.Item,{name:"code",label:"Name",rules:[{required:!0,message:"Please input code"}],children:Object(D.jsx)(F.a,{className:"infoInput",placeholder:"Please input code",onChange:this.onChange})}),Object(D.jsx)(L.a.Item,{children:Object(D.jsx)(B.a,{type:"primary",htmlType:"submit",children:"Join Class"})})]})]}):""]})}),Object(D.jsx)(Z,{})]})]})}}]),n}(a.Component);se.contextType=U;var re=se,ce=n(212),ie=M.a.Header,oe=function(){return Object(D.jsxs)(ie,{children:[Object(D.jsx)("img",{className:"logoNavbar",src:"/logo.png"}),Object(D.jsxs)(E.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:[Object(D.jsx)(E.a.Item,{children:"Home"},"1"),Object(D.jsx)(E.a.Item,{children:"About"},"2")]})]})},le=s.a.memo(oe),ue=n(375),de=M.a.Content,je=(ue.a.Step,function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).googleLogin=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new ce.a.auth.GoogleAuthProvider,x.auth().signInWithRedirect(t);case 2:case"end":return e.stop()}}),e)}))),e}return Object(o.a)(n,[{key:"render",value:function(){return Object(D.jsxs)(M.a,{style:{minHeight:"100vh"},children:[Object(D.jsx)(le,{}),Object(D.jsx)(de,{style:{padding:"5vh"},children:Object(D.jsxs)("div",{className:"site-layout-content",children:[Object(D.jsx)("h1",{children:"Log in"}),Object(D.jsxs)("button",{type:"button",onClick:this.googleLogin,class:"google-button",children:[Object(D.jsx)("span",{class:"google-button__icon",children:Object(D.jsxs)("svg",{viewBox:"0 0 366 372",xmlns:"http://www.w3.org/2000/svg",children:[Object(D.jsx)("path",{d:"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z",id:"Shape",fill:"#EA4335"}),Object(D.jsx)("path",{d:"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z",id:"Shape",fill:"#FBBC05"}),Object(D.jsx)("path",{d:"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z",id:"Shape",fill:"#4285F4"}),Object(D.jsx)("path",{d:"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z",fill:"#34A853"})]})}),Object(D.jsx)("span",{class:"google-button__text",children:"Sign in with Google"})]})]})}),Object(D.jsx)(Z,{})]})}}]),n}(a.Component));je.contextType=U;var he=je,pe=n(124),me=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(D.jsx)(pe.d,{className:"mt-5 text-center",children:Object(D.jsx)(pe.i,{children:Object(D.jsx)(pe.c,{})})})}}]),n}(a.Component),be=M.a.Content,xe=ue.a.Step,fe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).selectRole=function(){var t=Object(m.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.context.currentUser,"teacher"!=n){t.next=6;break}return t.next=4,g(a.uid,!0);case 4:t.next=8;break;case 6:return t.next=8,g(a.uid,!1);case 8:e.props.history.push("/extrainfo");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(D.jsxs)(M.a,{style:{minHeight:"100vh"},children:[Object(D.jsx)(le,{}),Object(D.jsx)(be,{style:{padding:"5vh"},children:Object(D.jsxs)("div",{className:"site-layout-content",children:[Object(D.jsxs)(ue.a,{size:"small",current:1,children:[Object(D.jsx)(xe,{title:"Login"}),Object(D.jsx)(xe,{title:"Select Role"}),Object(D.jsx)(xe,{title:"Extra Info"})]}),Object(D.jsx)(B.a,{size:"large",style:{float:"center",margin:"10px"},onClick:function(){return e.selectRole("student")},type:"primary",children:"Student"}),Object(D.jsx)(B.a,{size:"large",style:{float:"center",margin:"10px"},onClick:function(){return e.selectRole("teacher")},type:"primary",children:"Teacher"})]})}),Object(D.jsx)(Z,{})]})}}]),n}(a.Component);fe.contextType=U;var Oe=fe,ve=n(125),ge=n(217),ye=function(e){var t=e.component,n=Object(ge.a)(e,["component"]),s=Object(a.useContext)(U).currentUser;return Object(D.jsx)(j.b,Object(ve.a)(Object(ve.a)({},n),{},{render:function(e){return s?Object(D.jsx)(t,Object(ve.a)({},e)):Object(D.jsx)(j.a,{to:"/main"})}}))},we=n(383),Ce=M.a.Content,ke=ue.a.Step,Ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).getFormData=function(){var t=Object(m.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),a=e.context.currentUser,t.next=4,y(n,a.uid);case 4:e.props.history.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(D.jsxs)(M.a,{style:{minHeight:"100vh"},children:[Object(D.jsx)(le,{}),Object(D.jsx)(Ce,{style:{padding:"5vh"},children:Object(D.jsxs)("div",{className:"site-layout-content",children:[Object(D.jsxs)(ue.a,{size:"small",current:2,children:[Object(D.jsx)(ke,{title:"Login"}),Object(D.jsx)(ke,{title:"Select Role"}),Object(D.jsx)(ke,{title:"Extra Info"})]}),Object(D.jsxs)(L.a,{layout:"vertical",onFinish:this.getFormData,children:[Object(D.jsx)(L.a.Item,{label:"Nickname",className:"info",name:"nickname",required:!0,tooltip:"This is a required field",children:Object(D.jsx)(F.a,{className:"infoInput",placeholder:"input placeholder"})}),Object(D.jsx)(L.a.Item,{label:"Status Info",name:"status",className:"info",tooltip:{title:"Tooltip with customize icon",icon:Object(D.jsx)(we.a,{})},children:Object(D.jsx)(F.a,{className:"infoInput",placeholder:"input placeholder"})}),Object(D.jsxs)(L.a.Item,{className:"info",children:[Object(D.jsx)(B.a,{htmlType:"submit",type:"primary",children:"Submit"}),Object(D.jsx)(B.a,{style:{float:"center",margin:"10px"},onClick:function(){return e.props.history.push("/")},type:"primary",children:"Skip"})]})]})]})}),Object(D.jsx)(Z,{})]})}}]),n}(a.Component);Ie.contextType=U;var Ne=Ie,_e=n(218),Se=n(378),Ae=M.a.Content,Te=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).generateCode=function(){for(var e="qwertyuioplkjhgfdsazxcvbnm1234567890QAZXSWEDCVFRTGBNHYUJMKILOP",t="",n=0;n<5;n++){t+=e[Math.floor(Math.random()*e.length)]}return t},a.createClass=function(e){var t=a.context.currentUser,n=a.state.classes,s=a.generateCode(),r=Object(Se.a)();!function(e,t,n,a){var s={classCode:e,className:t,owner:n,room:a,students:null};f.collection("classes").doc(e).set(s),f.collection("assessment").doc(e).set({className:t,assessments:[]}),k(e,n)}(s,e.className,t.uid,r);var c={classCode:s,className:e.className,owner:t.uid,students:null};0==n?n=[c]:n.push(c),a.setState(n)},a.getClass=Object(m.a)(p.a.mark((function e(){var t,n,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.context,n=t.currentUser,s=t.status,e.next=3,C(n.uid,s.role);case 3:null==(r=e.sent)&&(r=!1),a.setState({classes:r});case 6:case"end":return e.stop()}}),e)}))),a.renderClass=function(e){var t=a.context.status;return 0==e?Object(D.jsx)("h2",{children:"No Class"}):e.map((function(e,n){return Object(D.jsx)(R.a,{className:"customCard",type:"inner",title:e.className,extra:Object(D.jsxs)("div",{children:[Object(D.jsx)(d.b,{to:{pathname:"/whiteboard/".concat(e.roomId,"/").concat(t.role),state:{val:e,collapse:a.props.location.state}},children:"Assessment"}),Object(D.jsx)(d.b,{to:{pathname:"/assessment",state:{val:e,collapse:a.props.location.state}},children:"Assessment"})]}),children:e.owner},n)}))},a.getRole=function(){var e=a.context.status;if(null!=e)return e.role?Object(D.jsxs)("div",{children:[Object(D.jsx)(R.a,{className:"customCard",type:"inner",title:"Add Class",children:Object(D.jsxs)(L.a,{onFinish:a.createClass,layout:"inline",name:"dynamic_rule",children:[Object(D.jsx)(L.a.Item,{name:"className",rules:[{required:!0,message:"Please input Class Name"}],children:Object(D.jsx)(F.a,{className:"infoInput",placeholder:"Please input Class Name"})}),Object(D.jsx)(L.a.Item,{children:Object(D.jsx)(B.a,{className:"addButton",htmlType:"submit",type:"primary",shape:"circle",icon:Object(D.jsx)(_e.a,{})})})]})},"add"),"Teacher"]}):Object(D.jsx)("div",{children:"Student"})},a.state={classes:void 0},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getClass()}},{key:"render",value:function(){var e=this.state.classes;return Object(D.jsxs)(M.a,{style:{minHeight:"100vh"},children:[Object(D.jsx)(X,{state:this.props.location.state}),Object(D.jsxs)(M.a,{className:"site-layout",children:[Object(D.jsx)(ne,{}),Object(D.jsx)(Ae,{style:{margin:"0 16px"},children:Object(D.jsxs)(R.a,{title:"Classes",children:[" ",void 0==e?Object(D.jsx)("div",{className:"loader",children:Object(D.jsx)(O.a,{size:"large",tip:"Loading..."})}):this.renderClass(e),this.getRole()]})}),Object(D.jsx)(Z,{})]})]})}}]),n}(a.Component);Te.contextType=U;var De=Te,Ue=M.a.Content,ze=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getAllAssessment=Object(m.a)(p.a.mark((function e(){var t,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.classInfo,n=t.classCode,e.next=4,A(n);case 4:0==(s=e.sent).assessments.length&&(s=!1),a.setState({assessments:s});case 7:case"end":return e.stop()}}),e)}))),a.createAssessment=function(e){var t=a.state,n=t.assessments,s=t.classInfo.classCode,r=Object(Se.a)(),c=e.assessmentName;S(s,c,r),0==n?n={assessments:[{assessmentObj:c,roomId:r}]}:n.assessments.push({assessmentObj:c,roomId:r}),a.setState({assessments:n})},a.renderAssessments=function(){var e=a.state,t=e.assessments,n=e.classInfo,s=a.context.status,r=n.classCode;if(0==t)return Object(D.jsx)("h2",{children:"No Assessments"});var c=t.sockedId;return t.assessments.map((function(e,t){var n=e.assessmentObj,a=e.roomId;return Object(D.jsx)(R.a,{className:"customCard",type:"inner",title:n,extra:void 0!=c||1==s.role?Object(D.jsx)(d.b,{to:{pathname:"/room/".concat(a,"/").concat(s.role,"/").concat(r,"/").concat(c)},children:"Join Assessment Room"}):Object(D.jsxs)(d.b,{disabled:!0,children:[c,"Assessment Not Open"]}),children:n},t)}))},a.getRole=function(){var e=a.context.status;if(null!=e)return e.role?Object(D.jsxs)("div",{children:[" ",Object(D.jsx)(R.a,{className:"customCard",type:"inner",title:"Add Assessment",children:Object(D.jsxs)(L.a,{onFinish:a.createAssessment,layout:"inline",name:"dynamic_rule",children:[Object(D.jsx)(L.a.Item,{name:"assessmentName",rules:[{required:!0,message:"Please input Assessment Name"}],children:Object(D.jsx)(F.a,{className:"infoInput",placeholder:"Please input Assessment Name"})}),Object(D.jsx)(L.a.Item,{children:Object(D.jsx)(B.a,{className:"addButton",htmlType:"submit",type:"primary",shape:"circle",icon:Object(D.jsx)(_e.a,{})})})]})},"add"),"Teacher"]}):Object(D.jsx)("div",{children:"Student"})},a.state={classInfo:a.props.location.state.val,assessments:void 0},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getAllAssessment()}},{key:"render",value:function(){var e=this.state.assessments;return Object(D.jsxs)(M.a,{style:{minHeight:"100vh"},children:[Object(D.jsx)(X,{state:this.props.location.state.collapse}),Object(D.jsxs)(M.a,{className:"site-layout",children:[Object(D.jsx)(ne,{}),Object(D.jsx)(Ue,{style:{margin:"0 16px"},children:Object(D.jsxs)(R.a,{title:"Classes",children:[void 0==e?Object(D.jsx)("div",{className:"loader",children:Object(D.jsx)(O.a,{size:"large",tip:"Loading..."})}):this.renderAssessments(),this.getRole()]})}),Object(D.jsx)(Z,{})]})]})}}]),n}(a.Component);ze.contextType=U;var He=ze,Me=n(214),Re=n(99),Le=n(208),Fe=n(119),Be=n.n(Fe),Ee=n(145),Pe=n.n(Ee),We=n(209);function qe(e){return e.reduce((function(e,t){return e+t}),0)/e.length}var Ye,Ge=function(e,t){for(var n=qe(e),a=qe(t),s=new Array(e.length),r=new Array(t.length),c=0;c<s.length;c++)s[c]=e[c]-n,r[c]=t[c]-a;return function(e,t){for(var n=e.length,a=0,s=0,r=0,c=0;c<n;c++)a+=e[c]*t[c],s+=e[c]*e[c],r+=t[c]*t[c];return a/(s+r-a)}(s,r)},Je=(n(192),We.a.div(Ye||(Ye=Object(Le.a)(["\n  padding: 20px;\n  display: flex;\n  height: 100vh;\n  width: 90%;\n  margin: auto;\n  flex-wrap: wrap;\n"])))),Ke=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){e.peer.peer.on("stream",(function(e){t.current.srcObject=e}))}),[]),Object(D.jsx)(R.a,{size:"small",title:Object(D.jsx)("p",{id:"d"+e.id}),extra:Object(D.jsx)("p",{id:e.id}),style:{width:Xe.width,height:Xe.height},children:Object(D.jsx)("video",{width:Xe.width,height:Xe.height,playsInline:!0,autoPlay:!0,ref:t})})},Xe={height:window.innerHeight/1,width:window.innerWidth/1},Ve=function(e){var t=Object(a.useState)([]),n=Object(Re.a)(t,2),s=n[0],r=n[1],c=[],i=Object(a.useRef)(),o=Object(a.useRef)(),l=Object(a.useRef)([]),u=e.match.params.roomID,d=e.match.params.role,j=e.match.params.code,h=e.match.params.socketId,b=1,x="https://isugapi.herokuapp.com/";Object(a.useEffect)((function(){i.current=Be.a.connect(x),navigator.mediaDevices.getDisplayMedia({video:{width:1280,height:720,frameRate:{ideal:10,max:15}},cursor:!0,mimeType:"video/webm; codecs=vp9"}).then((function(e){if(o.current.srcObject=e,"false"==d){var t=document.getElementById("canvas"),n=t.getContext("2d");requestAnimationFrame(function(){var e=Object(m.a)(p.a.mark((function e(){var s,r,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,3e3)}));case 2:n.drawImage(o.current,0,0,16,12),s=n.getImageData(0,0,t.width,t.height),r=s.data,l=Ge(r,c),u=(new Date).getTime(),i.current.emit("sendMsg",{data:l,id:h,myId:i.current.id,time:u,name:"name"}),console.log(l),c=r,requestAnimationFrame(a);case 11:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}())}i.current.emit("join room",u),"true"==d&&f(i.current.id),i.current.on("all users",(function(t){var n=[];t.forEach((function(t){if(h==t){var a=function(e,t,n){console.log(n);var a=new Pe.a({initiator:!0,trickle:!1,stream:n});return a.on("signal",(function(n){console.log(n),i.current.emit("sending signal",{userToSignal:e,callerID:t,signal:n})})),a}(t,i.current.id,e);l.current.push({peerID:t,peer:a}),n.push({peer:a,id:t})}})),r(n)})),i.current.on("cheater",(function(e){var t=document.getElementById(e.myId),n=document.getElementById("d"+e.myId);if(t.innerText="Name: "+e.myId,console.log(n),"number"===typeof e.data){var a=parseInt(Math.abs(100*e.data-100)),s="";a>=75&&(s='<div class="blink_me">Cheating !</div>'),n.innerHTML="<p>Cheating %: ".concat(a,"  ").concat(s,"<p>")}})),i.current.on("user joined",(function(t){var n=function(e,t,n){console.log(n);var a=new Pe.a({initiator:!1,trickle:!1,stream:n});return a.on("signal",(function(e){console.log(e),i.current.emit("returning signal",{signal:e,callerID:t})})),a.signal(e),a}(t.signal,t.callerID,e);l.current.push({peerID:t.callerID,peer:n}),b++,Xe={height:window.innerHeight/b,width:window.innerWidth/b},r((function(e){return[].concat(Object(Me.a)(e),[{peer:n,id:t.callerID}])}))})),i.current.on("receiving returned signal",(function(e){var t=l.current.find((function(t){return t.peerID===e.id}));console.log(t),t.peer.signal(e.signal)}))}))}),[]);var f=function(e){T(e,j)};return Object(D.jsxs)(Je,{children:[Object(D.jsx)("canvas",{id:"canvas",width:"16",height:"12"}),Object(D.jsx)("video",{width:Xe.width,height:Xe.height,playsInline:!0,autoPlay:!0,ref:o}),"true"==d?s.map((function(e,t){return Object(D.jsx)(Ke,{id:e.id,peer:e},t)})):""]})},Qe=n(146),Ze=n.n(Qe),$e=function(e){var t=Object(a.useState)("#000000"),n=Object(Re.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(3),i=Object(Re.a)(c,2),o=i[0],l=i[1],u=Object(a.useRef)(),d=e.match.params.roomID,j=e.match.params.role,h="https://isugapi.herokuapp.com/",p=null,m=function(e,t){u.current=Be.a.connect(h),u.current.on("sendCoord",(function(t){if(d==t.room){var n=t.data,a=n.x,s=n.y,r=n.px,c=n.py,i=t.settings,o=i.c,l=i.w,u=i.widthSize,j=i.heighthSize,h=e.map(a,0,u,0,window.innerWidth),p=e.map(s,0,j,0,window.innerHeight-window.innerHeight/18),m=e.map(r,0,u,0,window.innerWidth),b=e.map(c,0,j,0,window.innerHeight-window.innerHeight/18);e.stroke(o),e.strokeWeight(l),e.line(h,p,m,b)}}));var n=e.createCanvas(window.innerWidth,window.innerHeight-window.innerHeight/18).parent(t);"true"==j?n.addClass("drawTeacherCanvas"):n.addClass("drawStudentCanvas"),p=e,e.background(240)};var b=function(e,t,n,a){u.current.emit("coord",{data:{x:e,y:t,px:n,py:a},settings:{c:s,w:o,widthSize:window.innerWidth,heighthSize:window.innerHeight-window.innerHeight/18},room:d})};return Object(D.jsx)("div",{children:"true"==j?Object(D.jsxs)("div",{children:[" ",Object(D.jsxs)("div",{className:"optionToDraw",children:[Object(D.jsx)("label",{children:"Color:"}),Object(D.jsx)("button",{onClick:function(){p.background(240)},children:"Clear Screen"}),Object(D.jsx)("input",{type:"color",value:s,onChange:function(e){return r(e.target.value)}}),Object(D.jsx)("input",{type:"number",min:1,max:100,value:o,onChange:function(e){return l(e.target.value)}})]}),Object(D.jsx)(Ze.a,{setup:m,mouseDragged:function(e){e.stroke(s),e.strokeWeight(o),b(e.mouseX,e.mouseY,e.pmouseX,e.pmouseY),e.line(e.mouseX,e.mouseY,e.pmouseX,e.pmouseY),p=e}})]}):Object(D.jsx)(Ze.a,{setup:m})})},et=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(D.jsx)(d.a,{children:Object(D.jsxs)(H,{children:[Object(D.jsx)(ye,{exact:!0,path:"/",component:re}),Object(D.jsx)(ye,{exact:!0,path:"/classes",component:De}),Object(D.jsx)(ye,{path:"/room/:roomID/:role/:code/:socketId",component:Ve}),Object(D.jsx)(ye,{exact:!0,path:"/assessment",component:He}),Object(D.jsx)(ye,{exact:!0,path:"/whiteboard/:roomID/:role",component:$e}),Object(D.jsx)(j.b,{exact:!0,path:"/login",component:he}),Object(D.jsx)(j.b,{exact:!0,path:"/main",component:me}),Object(D.jsx)(j.b,{exact:!0,path:"/selectrole",component:Oe}),Object(D.jsx)(j.b,{exact:!0,path:"/extrainfo",component:Ne})]})})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(D.jsx)(et,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},67:function(e,t,n){}},[[366,1,2]]]);
//# sourceMappingURL=main.623de728.chunk.js.map