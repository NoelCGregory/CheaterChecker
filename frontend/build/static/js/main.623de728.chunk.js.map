{"version":3,"sources":["utils/base.js","utils/Firestore.js","utils/Auth.js","components/SideBar.js","components/FooterSection.js","components/HeaderSection.js","components/Home.js","components/Navbar.js","components/Login.js","components/Main.js","components/SelectRole.js","utils/PrivateRoute.js","components/ExtraInfo.js","components/Classes.js","components/Assessment.js","utils/algoritims.js","components/room.js","components/whiteboard.js","components/App.js","serviceWorker.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","checkUserExist","uid","a","docRef","collection","doc","get","exists","addUser","val","userRole","role","set","addInfo","values","update","joinClass","code","console","log","classesRef","trim","students","FieldValue","arrayUnion","addClassToUser","getAllClasses","studentOrTeacher","query","where","data","classes","docs","map","Classes","getUserRole","convertMS","ms","d","h","m","s","Math","floor","date","getLatestAssements","currentDate","Date","filteredData","tempData","assessments","push","class","className","storedDate","elapsedTime","getTime","elaspedTime","addAssesment","classCode","assessmentObj","roomId","toString","getAssesment","addTeacherSocket","sockedId","AuthContext","React","createContext","AuthProvider","state","currentUser","loader","status","sendUser","style","display","justifyContent","alignItems","height","checkUser","history","props","res","temp","setState","getRole","auth","onAuthStateChanged","user","this","size","tip","Provider","value","children","Component","withRouter","Sider","Layout","SubMenu","Menu","SideBar","onCollapse","collapsed","undefined","collapsible","src","theme","defaultSelectedKeys","mode","Item","icon","PieChartOutlined","to","pathname","DesktopOutlined","UserOutlined","title","TeamOutlined","memo","Footer","FooterSection","textAlign","Search","Input","Header","HeaderSection","padding","placeholder","enterButton","float","margin","onClick","signOut","type","Content","Home","generateCode","str","genStr","i","random","length","getLatestAssesment","context","latest","renderLatest","latestAsmt","idx","extra","addToClass","alert","onChange","e","target","minHeight","location","onFinish","name","label","rules","required","message","htmlType","contextType","Navbar","Login","Steps","Step","googleLogin","provider","GoogleAuthProvider","signInWithRedirect","viewBox","xmlns","id","fill","Main","SelectRole","selectRole","current","PrivateRoute","RouteComponent","component","rest","useContext","render","routeProps","ExtraInfo","getFormData","layout","tooltip","InfoCircleOutlined","createClass","room","uuid","owner","addClass","getClass","renderClass","collapse","shape","PlusOutlined","Assessment","getAllAssessment","classInfo","createAssessment","assessmentName","renderAssessments","socketId","disabled","mean","reduce","acc","pearson","b","avgA","avgB","newA","Array","newB","ii","p","p2","q2","kumarHassebrook","Container","styled","div","Video","ref","useRef","useEffect","peer","on","stream","srcObject","width","vid","playsInline","autoPlay","window","innerHeight","innerWidth","Room","useState","peers","setPeers","oldImage","socketRef","userVideo","peersRef","roomID","match","params","counter","endPoint","io","connect","navigator","mediaDevices","getDisplayMedia","video","frameRate","ideal","max","cursor","mimeType","then","canvas","document","getElementById","ctx","getContext","requestAnimationFrame","Promise","r","setTimeout","drawImage","imageData","getImageData","result","emit","myId","time","loop","addSocket","users","forEach","userID","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","peerID","payload","count","innerText","percent","parseInt","abs","isCheating","innerHTML","incomingSignal","addPeer","item","find","index","Whiteboard","color","setColor","weight","setWeight","setup","p5","parent","coord","x","y","px","py","settings","c","w","widthSize","heighthSize","x1","y1","x2","y2","stroke","strokeWeight","line","createCanvas","background","connection","min","mouseDragged","mouseX","mouseY","pmouseX","pmouseY","App","Auth","exact","path","Boolean","hostname","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.623de728.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\n\nconst app = firebase.initializeApp({\n  apiKey: \"AIzaSyDGQEeY4WAxVnkEc8g8Yvx-OhveqaDseK8\",\n  authDomain: \"cheaterchecker-202ee.firebaseapp.com\",\n  projectId: \"cheaterchecker-202ee\",\n  storageBucket: \"cheaterchecker-202ee.appspot.com\",\n  messagingSenderId: \"910367486585\",\n  appId: \"1:910367486585:web:1d47256801e71b1a535aa8\",\n  measurementId: \"G-XSK9QN5PJM\",\n});\n\nconst db = firebase.firestore();\n\nexport { app, db };\n","import { db } from \"./base\";\nimport firebase from \"firebase/app\";\n\nconst checkUserExist = async (uid) => {\n  const docRef = db.collection(\"users\").doc(uid);\n  const doc = await docRef.get();\n\n  if (!doc.exists) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nconst addUser = async (uid, val) => {\n  const docRef = db.collection(\"users\").doc(uid);\n  let userRole = {\n    role: null,\n  };\n  if (val) {\n    userRole.role = true;\n  } else {\n    userRole.role = false;\n  }\n  await docRef.set(userRole);\n};\n\nconst addInfo = async (values, uid) => {\n  const docRef = db.collection(\"users\").doc(uid);\n  await docRef.update(values);\n};\nconst addClass = (code, className, uid, room) => {\n  const docRef = db.collection(\"classes\").doc(code);\n  let data = {\n    classCode: code,\n    className: className,\n    owner: uid,\n    room: room,\n    students: null,\n  };\n  docRef.set(data);\n  const asmRef = db.collection(\"assessment\").doc(code);\n  asmRef.set({\n    className: className,\n    assessments: [],\n  });\n  addClassToUser(code, uid);\n};\nconst joinClass = async (code, uid) => {\n  try {\n    console.log(code, uid);\n    const classesRef = db.collection(\"classes\").doc(code.trim());\n    await classesRef.update({\n      students: firebase.firestore.FieldValue.arrayUnion(uid),\n    });\n    addClassToUser(code, uid);\n  } catch (err) {\n    console.log(err);\n    return err;\n  }\n};\nconst getAllClasses = async (uid, studentOrTeacher) => {\n  const docRef = db.collection(\"classes\");\n  let query = null;\n  if (studentOrTeacher == true) {\n    query = docRef.where(\"owner\", \"==\", uid);\n  } else {\n    query = docRef.where(\"students\", \"array-contains\", uid);\n  }\n  const data = await query.get();\n  const classes = data.docs.map((doc) => {\n    return doc.data();\n  });\n  return classes;\n};\nconst addClassToUser = async (code, uid) => {\n  const docRef = db.collection(\"users\").doc(uid);\n  await docRef.update({\n    Classes: firebase.firestore.FieldValue.arrayUnion(code),\n  });\n};\nconst getUserRole = async (uid) => {\n  const docRef = db.collection(\"users\").doc(uid);\n  const doc = await docRef.get();\n  const data = doc.data();\n  return data;\n};\nfunction convertMS(ms) {\n  var d, h, m, s;\n  s = Math.floor(ms / 1000);\n  m = Math.floor(s / 60);\n  s = s % 60;\n  h = Math.floor(m / 60);\n  m = m % 60;\n  d = Math.floor(h / 24);\n  h = h % 24;\n  let date = \"\";\n  if (d != 0) {\n    date += d + \" days, \";\n  }\n  if (h != 0) {\n    date += h + \" hours, \";\n  }\n  if (m != 0) {\n    date += m + \" minutes, \";\n  }\n  if (s != 0) {\n    date += s + \" seconds \";\n  }\n\n  return date;\n}\nconst getLatestAssements = async (classes) => {\n  const docRef = db.collection(\"assessment\");\n  const query = docRef.where(\"classCode\", \"in\", classes);\n  const data = await query.get();\n  const currentDate = new Date();\n  let filteredData = [];\n  data.docs.map((doc) => {\n    const tempData = doc.data();\n    tempData.assessments.map((val) => {\n      filteredData.push({ data: val, class: tempData.className });\n      var storedDate = new Date(val.date);\n      var elapsedTime = currentDate.getTime() - storedDate.getTime();\n      val.elaspedTime = convertMS(elapsedTime);\n    });\n  });\n  return filteredData;\n};\n\nconst addAssesment = async (classCode, assessmentObj, roomId) => {\n  const docRef = db.collection(\"assessment\").doc(classCode);\n  const date = new Date().toString();\n  await docRef.update({\n    classCode,\n    assessments: firebase.firestore.FieldValue.arrayUnion({\n      assessmentObj,\n      roomId,\n      date,\n    }),\n  });\n};\nconst getAssesment = async (classCode) => {\n  const docRef = db.collection(\"assessment\").doc(classCode);\n  const doc = await docRef.get();\n  return doc.data();\n};\n\nconst addTeacherSocket = async (sockedId, classCode) => {\n  const docRef = db.collection(\"assessment\").doc(classCode);\n\n  await docRef.update({ sockedId });\n};\n\nexport {\n  getLatestAssements,\n  addTeacherSocket,\n  getAssesment,\n  addAssesment,\n  checkUserExist,\n  addUser,\n  getUserRole,\n  addClass,\n  joinClass,\n  addInfo,\n  getAllClasses,\n};\n","import React, { Component } from \"react\";\nimport { app } from \"./base\";\nimport { Spin } from \"antd\";\nimport { checkUserExist, getUserRole } from \"./Firestore\";\nimport { withRouter } from \"react-router-dom\";\n\nexport const AuthContext = React.createContext();\n\nclass AuthProvider extends Component {\n  state = {\n    currentUser: null,\n    loader: true,\n    status: null,\n    sendUser: false,\n  };\n  style = {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    height: \"75vh\",\n  };\n\n  componentDidMount() {\n    app.auth().onAuthStateChanged((user) => {\n      if (user != null) {\n        this.setState({ currentUser: user, loader: false, status: null });\n      } else {\n        this.setState({ currentUser: user, loader: false });\n      }\n    });\n  }\n  checkUser = async () => {\n    let { currentUser, sendUser } = this.state;\n    const { history } = this.props;\n    if (currentUser != null && sendUser == false) {\n      let res = await checkUserExist(currentUser.uid);\n      let temp = \"\";\n      if (res) {\n        temp = \"/selectrole\";\n      } else {\n        temp = \"/\";\n      }\n      sendUser = true;\n      history.push(temp);\n      this.setState({ currentUser, sendUser });\n    }\n  };\n\n  getRole = async () => {\n    const { currentUser, status } = this.state;\n    if (currentUser != null && status == null) {\n      const data = await getUserRole(currentUser.uid);\n      this.setState({ status: data });\n    }\n  };\n  componentDidUpdate() {\n    this.checkUser();\n    this.getRole();\n  }\n\n  render() {\n    const { currentUser, loader, status } = this.state;\n    if (loader) {\n      return (\n        <div style={this.style}>\n          <Spin size=\"large\" tip=\"Loading...\" />\n        </div>\n      );\n    } else {\n      return (\n        <AuthContext.Provider value={{ currentUser, status }}>\n          {this.props.children}\n        </AuthContext.Provider>\n      );\n    }\n  }\n}\n\nexport default withRouter(AuthProvider);\n// export const AuthProvider = ({ children }) => {\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [pending, setPending] = useState(true);\n\n//   useEffect(() => {\n//     app.auth().onAuthStateChanged((user) => {\n//       setCurrentUser(user);\n//       setPending(false);\n//     });\n//   }, []);\n\n//   if (pending) {\n//     return <>Loading...</>;\n//   }\n\n//   return (\n//     <AuthContext.Provider\n//       value={{\n//         currentUser,\n//       }}\n//     >\n//       {children}\n//     </AuthContext.Provider>\n//   );\n// };\n","import React, { Component } from \"react\";\nimport \"./ui.css\";\nimport { Layout, Menu } from \"antd\";\nimport {\n  DesktopOutlined,\n  PieChartOutlined,\n  TeamOutlined,\n  UserOutlined,\n} from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nconst { Sider } = Layout;\nconst { SubMenu } = Menu;\n\nclass SideBar extends Component {\n  constructor(props) {\n    super(props);\n    let temp = false;\n    if (this.props[\"state\"] != undefined) {\n      temp = this.props.state;\n    }\n    this.state = {\n      collapsed: temp,\n    };\n  }\n\n  onCollapse = (collapsed) => {\n    this.setState({ collapsed });\n  };\n\n  render() {\n    const { collapsed } = this.state;\n    return (\n      <Sider collapsible collapsed={collapsed} onCollapse={this.onCollapse}>\n        {collapsed ? (\n          <img className=\"logosmall\" src=\"/logosmall.png\"></img>\n        ) : (\n          <img className=\"logo\" src=\"/logo.png\"></img>\n        )}\n        <Menu theme=\"dark\" defaultSelectedKeys={[\"1\"]} mode=\"inline\">\n          <Menu.Item key=\"1\" icon={<PieChartOutlined />}>\n            <Link\n              to={{\n                pathname: \"/\",\n                state: collapsed,\n              }}\n            >\n              Home\n            </Link>\n          </Menu.Item>\n          <Menu.Item key=\"2\" icon={<DesktopOutlined />}>\n            <Link\n              to={{\n                pathname: \"/classes\",\n                state: collapsed,\n              }}\n            >\n              Classes\n            </Link>\n          </Menu.Item>\n          <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"User\">\n            <Menu.Item key=\"3\">Tom</Menu.Item>\n            <Menu.Item key=\"4\">Bill</Menu.Item>\n            <Menu.Item key=\"5\">Alex</Menu.Item>\n          </SubMenu>\n          <SubMenu key=\"sub2\" icon={<TeamOutlined />} title=\"Team\">\n            <Menu.Item key=\"6\">Team 1</Menu.Item>\n            <Menu.Item key=\"8\">Team 2</Menu.Item>\n          </SubMenu>\n        </Menu>\n      </Sider>\n    );\n  }\n}\n\nexport default React.memo(SideBar);\n","import React from \"react\";\nimport \"antd/dist/antd.css\";\nimport \"./ui.css\";\nimport { Layout } from \"antd\";\nconst { Footer } = Layout;\n\nconst FooterSection = () => {\n  return (\n    <Footer style={{ textAlign: \"center\" }}>\n      CheaterChecker ©2021 Created by Noel Gregory\n    </Footer>\n  );\n};\n\nexport default React.memo(FooterSection);\n","import React from \"react\";\nimport { Layout, Input, Button } from \"antd\";\nimport { app } from \"../utils/base\";\nconst { Search } = Input;\nconst { Header } = Layout;\n\nconst HeaderSection = () => {\n  return (\n    <Header className=\"site-layout-background\" style={{ padding: 0 }}>\n      {\" \"}\n      <Search\n        className=\"search\"\n        placeholder=\"input search text\"\n        enterButton=\"Search\"\n        size=\"large\"\n      />\n      <Button\n        size=\"large\"\n        style={{ float: \"right\", margin: \"10px\" }}\n        onClick={() => app.auth().signOut()}\n        type=\"primary\"\n      >\n        Sign out\n      </Button>\n    </Header>\n  );\n};\n\nexport default React.memo(HeaderSection);\n","import React, { Component } from \"react\";\nimport { AuthContext } from \"../utils/Auth\";\nimport { getLatestAssements, joinClass } from \"../utils/Firestore\";\nimport \"./ui.css\";\nimport { Layout, Card, Spin, Button, Form, Input } from \"antd\";\nimport SiderBar from \"./SideBar\";\nimport FooterSection from \"./FooterSection\";\nimport HeaderSection from \"./HeaderSection\";\n\nconst { Content } = Layout;\n\nclass Home extends Component {\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = { latest: undefined };\n  }\n  generateCode = () => {\n    const str =\n      \"qwertyuioplkjhgfdsazxcvbnm1234567890QAZXSWEDCVFRTGBNHYUJMKILOP\";\n    let genStr = \"\";\n    for (let i = 0; i < 5; i++) {\n      const randomIndex = Math.floor(Math.random() * str.length);\n      genStr += str[randomIndex];\n    }\n    return genStr;\n  };\n\n  getLatestAssesment = async () => {\n    const { status } = this.context;\n    let latest = await getLatestAssements(status.Classes);\n    if (latest.length == 0) latest = false;\n    console.log(latest);\n    this.setState({ latest });\n  };\n\n  renderLatest = (latestAsmt) => {\n    if (latestAsmt == false) return <h3>No Latest Assessment</h3>;\n    console.log(\"_________________________________________________\");\n    console.log(latestAsmt);\n    return latestAsmt.map((val, idx) => {\n      return (\n        <Card\n          className=\"customCard\"\n          key={idx}\n          type=\"inner\"\n          title={val.class}\n          extra={val.data.elaspedTime}\n        >\n          {val.data.assessmentObj}\n        </Card>\n      );\n    });\n  };\n\n  addToClass = async (values) => {\n    const { currentUser } = this.context;\n    if (values != null) {\n      const result = await joinClass(values.code, currentUser.uid);\n      if (result != undefined) {\n        alert(\"This Class Does Not Exist\");\n      }\n    }\n  };\n\n  onChange = (e) => {\n    this.setState({ value: e.target.value });\n  };\n\n  render() {\n    const { status } = this.context;\n    const { latest } = this.state;\n    if (status != null && latest == undefined) {\n      this.getLatestAssesment();\n    }\n    return (\n      <Layout style={{ minHeight: \"100vh\" }}>\n        <SiderBar state={this.props.location.state} />\n        <Layout className=\"site-layout\">\n          <HeaderSection />\n          <Content style={{ margin: \"0 16px\" }}>\n            <div\n              className=\"site-layout-background\"\n              style={{ padding: 24, minHeight: 360 }}\n            >\n              {latest == undefined ? (\n                <div className=\"loader\">\n                  <Spin size=\"large\" tip=\"Loading...\" />\n                </div>\n              ) : (\n                this.renderLatest(latest)\n              )}\n              {status != null ? (\n                status.role == true ? (\n                  <div>\n                    <h3>Teacher</h3>\n                  </div>\n                ) : (\n                  <div>\n                    <h3>Student</h3>\n                    <Form onFinish={this.addToClass} name=\"dynamic_rule\">\n                      <Form.Item\n                        name=\"code\"\n                        label=\"Name\"\n                        rules={[\n                          {\n                            required: true,\n                            message: \"Please input code\",\n                          },\n                        ]}\n                      >\n                        <Input\n                          className=\"infoInput\"\n                          placeholder=\"Please input code\"\n                          onChange={this.onChange}\n                        />\n                      </Form.Item>\n\n                      <Form.Item>\n                        <Button type=\"primary\" htmlType=\"submit\">\n                          Join Class\n                        </Button>\n                      </Form.Item>\n                    </Form>\n                  </div>\n                )\n              ) : (\n                \"\"\n              )}\n            </div>\n          </Content>\n          <FooterSection />\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nexport default Home;\n\n{\n  /* <Form name=\"dynamic_rule\">\n<Form.Item\n  name=\"username\"\n  label=\"Name\"\n  rules={[\n    {\n      required: true,\n      message: \"Please input code\",\n    },\n  ]}\n>\n  <Input\n    placeholder=\"Please input code\"\n    value={this.state.someVal || \"\"}\n    onChange={this.onChange}\n  />\n</Form.Item>\n\n<Form.Item>\n  <Button\n    onClick={() => this.addToClass()}\n    type=\"primary\"\n  >\n    Join Class\n  </Button>\n</Form.Item>\n</Form> */\n}\n\n// import React, { Component } from \"react\";\n// import { AuthContext } from \"../utils/Auth\";\n// import { app } from \"../utils/base\";\n// import { getUserRole, addClass, joinClass } from \"../utils/Firestore\";\n// import \"antd/dist/antd.css\";\n// import \"./ui.css\";\n// import { Layout, Menu, Breadcrumb, Input, Form, Button } from \"antd\";\n// import {\n//   DesktopOutlined,\n//   PieChartOutlined,\n//   FileOutlined,\n//   TeamOutlined,\n//   UserOutlined,\n// } from \"@ant-design/icons\";\n\n// const { Search } = Input;\n\n// const { Header, Content, Footer, Sider } = Layout;\n// const { SubMenu } = Menu;\n\n// class Home extends Component {\n//   static contextType = AuthContext;\n//   state = {\n//     collapsed: false,\n//     role: null,\n//     value: null,\n//   };\n\n//   generateCode = () => {\n//     const str =\n//       \"qwertyuioplkjhgfdsazxcvbnm1234567890QAZXSWEDCVFRTGBNHYUJMKILOP\";\n//     let genStr = \"\";\n//     for (let i = 0; i < 5; i++) {\n//       const randomIndex = Math.floor(Math.random() * str.length);\n//       genStr += str[randomIndex];\n//     }\n//     addClass(genStr);\n//   };\n\n//   addToClass = () => {\n//     const { currentUser } = this.context;\n//     joinClass(this.state.value, currentUser.uid);\n//   };\n\n//   getRole = async () => {\n//     const { currentUser } = this.context;\n//     const data = await getUserRole(currentUser.uid);\n//     this.setState({ role: data });\n//   };\n\n//   componentDidMount() {\n//     this.getRole();\n//   }\n\n//   onCollapse = (collapsed) => {\n//     console.log(collapsed);\n//     this.setState({ collapsed });\n//   };\n\n//   onChange = (e) => {\n//     this.setState({ value: e.target.value });\n//   };\n\n//   render() {\n//     const { collapsed, role } = this.state;\n//     console.log(role);\n//     return (\n//       <Layout style={{ minHeight: \"100vh\" }}>\n//         <Sider collapsible collapsed={collapsed} onCollapse={this.onCollapse}>\n//           {collapsed ? (\n//             <img className=\"logosmall\" src=\"/logosmall.png\"></img>\n//           ) : (\n//             <img className=\"logo\" src=\"/logo.png\"></img>\n//           )}\n//           <Menu theme=\"dark\" defaultSelectedKeys={[\"1\"]} mode=\"inline\">\n//             <Menu.Item key=\"1\" icon={<PieChartOutlined />}>\n//               Option 1\n//             </Menu.Item>\n//             <Menu.Item key=\"2\" icon={<DesktopOutlined />}>\n//               Option 2\n//             </Menu.Item>\n//             <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"User\">\n//               <Menu.Item key=\"3\">Tom</Menu.Item>\n//               <Menu.Item key=\"4\">Bill</Menu.Item>\n//               <Menu.Item key=\"5\">Alex</Menu.Item>\n//             </SubMenu>\n//             <SubMenu key=\"sub2\" icon={<TeamOutlined />} title=\"Team\">\n//               <Menu.Item key=\"6\">Team 1</Menu.Item>\n//               <Menu.Item key=\"8\">Team 2</Menu.Item>\n//             </SubMenu>\n//             <Menu.Item key=\"9\" icon={<FileOutlined />}>\n//               bkh\n//             </Menu.Item>\n//           </Menu>\n//         </Sider>\n//         <Layout className=\"site-layout\">\n//           <Header className=\"site-layout-background\" style={{ padding: 0 }}>\n//             {\" \"}\n//             <Search\n//               className=\"search\"\n//               placeholder=\"input search text\"\n//               enterButton=\"Search\"\n//               size=\"large\"\n//             />\n//             <Button\n//               size=\"large\"\n//               style={{ float: \"right\", margin: \"10px\" }}\n//               onClick={() => app.auth().signOut()}\n//               type=\"primary\"\n//             >\n//               Sign out\n//             </Button>\n//           </Header>\n//           <Content style={{ margin: \"0 16px\" }}>\n//             <Breadcrumb style={{ margin: \"16px 0\" }}>\n//               <Breadcrumb.Item>User</Breadcrumb.Item>\n//               <Breadcrumb.Item>Bill</Breadcrumb.Item>\n//             </Breadcrumb>\n//             <div\n//               className=\"site-layout-background\"\n//               style={{ padding: 24, minHeight: 360 }}\n//             >\n//               {role != null ? (\n//                 role == true ? (\n//                   <div>\n//                     <h3>Teacher</h3>\n//                     <button onClick={this.generateCode}>Generate code</button>\n//                   </div>\n//                 ) : (\n//                   <div>\n//                     <h3>Student</h3>\n//                     <Form name=\"dynamic_rule\">\n//                       <Form.Item\n//                         name=\"username\"\n//                         label=\"Name\"\n//                         rules={[\n//                           {\n//                             required: true,\n//                             message: \"Please input code\",\n//                           },\n//                         ]}\n//                       >\n//                         <Input\n//                           placeholder=\"Please input code\"\n//                           value={this.state.someVal || \"\"}\n//                           onChange={this.onChange}\n//                         />\n//                       </Form.Item>\n\n//                       <Form.Item>\n//                         <Button\n//                           onClick={() => this.addToClass()}\n//                           type=\"primary\"\n//                         >\n//                           Join Class\n//                         </Button>\n//                       </Form.Item>\n//                     </Form>\n//                   </div>\n//                 )\n//               ) : (\n//                 \"\"\n//               )}\n//             </div>\n//           </Content>\n//           <Footer style={{ textAlign: \"center\" }}>\n//             Ant Design ©2018 Created by Ant UED\n//           </Footer>\n//         </Layout>\n//       </Layout>\n//     );\n//   }\n// }\n\n// export default Home;\n// const Home = () => {\n//   const { currentUser } = useContext(AuthContext);\n//   const [role, setRole] = useState(null);\n\n//   if (!currentUser) {\n//     return <Redirect to=\"/login\" />;\n//   }\n//   const getData = () => {\n//     setRole(getUserRole(currentUser.uid));\n//   };\n//   getData();\n//   console.log(role);\n//   return (\n//     <>\n//       <h1>Home</h1>\n//       {currentUser.email}\n//       <button onClick={() => app.auth().signOut()}>Sign out</button>\n//     </>\n//   );\n// };\n\n// export default Home;\n","import React from \"react\";\nimport { Layout, Menu } from \"antd\";\n\nconst { Header } = Layout;\n\nconst Navbar = () => {\n  return (\n    <Header>\n      <img className=\"logoNavbar\" src=\"/logo.png\"></img>\n      <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={[\"2\"]}>\n        <Menu.Item key=\"1\">Home</Menu.Item>\n        <Menu.Item key=\"2\">About</Menu.Item>\n      </Menu>\n    </Header>\n  );\n};\n\nexport default React.memo(Navbar);\n","import React, { Component } from \"react\";\nimport \"./ui.css\";\nimport { app } from \"../utils/base.js\";\nimport firebase from \"firebase\";\nimport { AuthContext } from \"../utils/Auth.js\";\nimport Navbar from \"./Navbar\";\nimport { Layout, Steps } from \"antd\";\nimport FooterSection from \"./FooterSection\";\nconst { Content } = Layout;\nconst { Step } = Steps;\n\nclass Login extends Component {\n  static contextType = AuthContext;\n\n  googleLogin = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    const raw = app.auth().signInWithRedirect(provider);\n  };\n\n  render() {\n    return (\n      <Layout style={{ minHeight: \"100vh\" }}>\n        <Navbar />\n        <Content style={{ padding: \"5vh\" }}>\n          <div className=\"site-layout-content\">\n            <h1>Log in</h1>\n            <button\n              type=\"button\"\n              onClick={this.googleLogin}\n              class=\"google-button\"\n            >\n              <span class=\"google-button__icon\">\n                <svg viewBox=\"0 0 366 372\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z\"\n                    id=\"Shape\"\n                    fill=\"#EA4335\"\n                  />\n                  <path\n                    d=\"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z\"\n                    id=\"Shape\"\n                    fill=\"#FBBC05\"\n                  />\n                  <path\n                    d=\"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z\"\n                    id=\"Shape\"\n                    fill=\"#4285F4\"\n                  />\n                  <path\n                    d=\"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z\"\n                    fill=\"#34A853\"\n                  />\n                </svg>\n              </span>\n              <span class=\"google-button__text\">Sign in with Google</span>\n            </button>\n          </div>\n        </Content>\n        <FooterSection />\n      </Layout>\n    );\n  }\n}\n\nexport default Login;\n// const Login = ({ history }) => {\n//   const googleLogin = () => {\n//     var provider = new firebase.auth.GoogleAuthProvider();\n//     app.auth().signInWithRedirect(provider);\n//   };\n//   const { currentUser } = useContext(AuthContext);\n\n//   const loadPage = async () => {\n//     let res = await checkUserExist(currentUser.uid);\n//     if (res) {\n//       history.push({\n//         pathname: \"/chooserole\",\n//         state: { uid: currentUser.uid },\n//       });\n//     } else {\n//       history.push(\"/\");\n//     }\n//   };\n\n//   if (currentUser) {\n//     console.log(currentUser);\n//     loadPage();\n//   }\n//   return (\n//     <div>\n//       <h1>Log in</h1>\n//       <button onClick={googleLogin}>OnClick</button>\n//     </div>\n//   );\n// };\n\n// export default withRouter(Login);\n","import React, { Component } from \"react\";\nimport { MDBContainer, MDBRow, MDBCol } from \"mdbreact\";\n\nclass Main extends Component {\n  state = {};\n\n  render() {\n    return (\n      <MDBContainer className=\"mt-5 text-center\">\n        <MDBRow>\n          <MDBCol></MDBCol>\n        </MDBRow>\n      </MDBContainer>\n    );\n  }\n}\n\nexport default Main;\n// class ChooseRole extends Component {\n//   addRole = async (val) => {\n//     const userUid = this.props.location.state.uid;\n//     if (val == \"teacher\") {\n//       await addUser(userUid, true);\n//     } else {\n//       await addUser(userUid, false);\n//     }\n//     this.props.history.push(\"/\");\n//   };\n//   render() {\n//     return (\n//       <div>\n//         <button\n//           onClick={() => {\n//             this.addRole(\"teacher\");\n//           }}\n//         >\n//           Teacher\n//         </button>\n//         <button\n//           onClick={() => {\n//             this.addRole(\"student\");\n//           }}\n//         >\n//           Student\n//         </button>\n//       </div>\n//     );\n//   }\n// }\n\n// export default ChooseRole;\n","import React, { Component } from \"react\";\nimport { addUser } from \"../utils/Firestore\";\nimport Navbar from \"./Navbar\";\nimport { Layout, Steps, Button } from \"antd\";\nimport FooterSection from \"./FooterSection\";\nimport { AuthContext } from \"../utils/Auth\";\nconst { Content } = Layout;\nconst { Step } = Steps;\nclass SelectRole extends Component {\n  static contextType = AuthContext;\n  selectRole = async (val) => {\n    const { currentUser } = this.context;\n    if (val == \"teacher\") {\n      await addUser(currentUser.uid, true);\n    } else {\n      await addUser(currentUser.uid, false);\n    }\n    this.props.history.push(\"/extrainfo\");\n  };\n  render() {\n    return (\n      <Layout style={{ minHeight: \"100vh\" }}>\n        <Navbar />\n        <Content style={{ padding: \"5vh\" }}>\n          <div className=\"site-layout-content\">\n            <Steps size=\"small\" current={1}>\n              <Step title=\"Login\" />\n              <Step title=\"Select Role\" />\n              <Step title=\"Extra Info\" />\n            </Steps>\n            <Button\n              size=\"large\"\n              style={{ float: \"center\", margin: \"10px\" }}\n              onClick={() => this.selectRole(\"student\")}\n              type=\"primary\"\n            >\n              Student\n            </Button>\n            <Button\n              size=\"large\"\n              style={{ float: \"center\", margin: \"10px\" }}\n              onClick={() => this.selectRole(\"teacher\")}\n              type=\"primary\"\n            >\n              Teacher\n            </Button>\n          </div>\n        </Content>\n        <FooterSection />\n      </Layout>\n    );\n  }\n}\n\nexport default SelectRole;\n","import React, { useContext } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { AuthContext } from \"./Auth\";\n\nconst PrivateRoute = ({ component: RouteComponent, ...rest }) => {\n  const { currentUser } = useContext(AuthContext);\n\n  return (\n    <Route\n      {...rest}\n      render={(routeProps) =>\n        !!currentUser ? (\n          <RouteComponent {...routeProps} />\n        ) : (\n          <Redirect to={\"/main\"} />\n        )\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import React, { Component } from \"react\";\nimport \"./ui.css\";\nimport { AuthContext } from \"../utils/Auth.js\";\nimport { addInfo } from \"../utils/Firestore\";\nimport Navbar from \"./Navbar\";\nimport { Layout, Steps, Button, Form, Input } from \"antd\";\nimport { InfoCircleOutlined } from \"@ant-design/icons\";\nimport FooterSection from \"./FooterSection\";\nconst { Content } = Layout;\nconst { Step } = Steps;\n\nclass ExtraInfo extends Component {\n  static contextType = AuthContext;\n  getFormData = async (value) => {\n    console.log(value);\n    const { currentUser } = this.context;\n    await addInfo(value, currentUser.uid);\n    this.props.history.push(\"/\");\n  };\n\n  render() {\n    return (\n      <Layout style={{ minHeight: \"100vh\" }}>\n        <Navbar />\n        <Content style={{ padding: \"5vh\" }}>\n          <div className=\"site-layout-content\">\n            <Steps size=\"small\" current={2}>\n              <Step title=\"Login\" />\n              <Step title=\"Select Role\" />\n              <Step title=\"Extra Info\" />\n            </Steps>\n            <Form layout=\"vertical\" onFinish={this.getFormData}>\n              <Form.Item\n                label=\"Nickname\"\n                className=\"info\"\n                name=\"nickname\"\n                required\n                tooltip=\"This is a required field\"\n              >\n                <Input className=\"infoInput\" placeholder=\"input placeholder\" />\n              </Form.Item>\n              <Form.Item\n                label=\"Status Info\"\n                name=\"status\"\n                className=\"info\"\n                tooltip={{\n                  title: \"Tooltip with customize icon\",\n                  icon: <InfoCircleOutlined />,\n                }}\n              >\n                <Input className=\"infoInput\" placeholder=\"input placeholder\" />\n              </Form.Item>\n              <Form.Item className=\"info\">\n                <Button htmlType=\"submit\" type=\"primary\">\n                  Submit\n                </Button>\n                <Button\n                  style={{ float: \"center\", margin: \"10px\" }}\n                  onClick={() => this.props.history.push(\"/\")}\n                  type=\"primary\"\n                >\n                  Skip\n                </Button>\n              </Form.Item>\n            </Form>\n          </div>\n        </Content>\n        <FooterSection />\n      </Layout>\n    );\n  }\n}\n\nexport default ExtraInfo;\n","import React, { Component } from \"react\";\nimport \"./ui.css\";\nimport { addClass, getAllClasses } from \"../utils/Firestore\";\nimport FooterSection from \"./FooterSection\";\nimport HeaderSection from \"./HeaderSection\";\nimport { Layout, Card, Spin, Button, Form, Input } from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport SiderBar from \"./SideBar\";\nimport { AuthContext } from \"../utils/Auth\";\nimport { Link } from \"react-router-dom\";\nimport { v1 as uuid } from \"uuid\";\nconst { Content } = Layout;\n\nclass Classes extends Component {\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = { classes: undefined };\n  }\n  generateCode = () => {\n    const str =\n      \"qwertyuioplkjhgfdsazxcvbnm1234567890QAZXSWEDCVFRTGBNHYUJMKILOP\";\n    let genStr = \"\";\n    for (let i = 0; i < 5; i++) {\n      const randomIndex = Math.floor(Math.random() * str.length);\n      genStr += str[randomIndex];\n    }\n    return genStr;\n  };\n\n  createClass = (values) => {\n    const { currentUser } = this.context;\n    let { classes } = this.state;\n    const str = this.generateCode();\n    const room = uuid();\n    addClass(str, values.className, currentUser.uid, room);\n\n    let data = {\n      classCode: str,\n      className: values.className,\n      owner: currentUser.uid,\n      students: null,\n    };\n    if (classes == false) {\n      classes = [data];\n    } else {\n      classes.push(data);\n    }\n    this.setState(classes);\n  };\n\n  getClass = async () => {\n    const { currentUser, status } = this.context;\n    let data = await getAllClasses(currentUser.uid, status.role);\n    if (data == null) data = false;\n    this.setState({ classes: data });\n  };\n  componentDidMount() {\n    this.getClass();\n  }\n  renderClass = (classes) => {\n    const { status } = this.context;\n    if (classes == false) return <h2>No Class</h2>;\n    return classes.map((val, idx) => {\n      return (\n        <Card\n          className=\"customCard\"\n          key={idx}\n          type=\"inner\"\n          title={val.className}\n          extra={\n            <div>\n              <Link\n                to={{\n                  pathname: `/whiteboard/${val.roomId}/${status.role}`,\n                  state: { val, collapse: this.props.location.state },\n                }}\n              >\n                Assessment\n              </Link>\n              <Link\n                to={{\n                  pathname: \"/assessment\",\n                  state: { val, collapse: this.props.location.state },\n                }}\n              >\n                Assessment\n              </Link>\n            </div>\n          }\n        >\n          {val.owner}\n        </Card>\n      );\n    });\n  };\n  getRole = () => {\n    const { status } = this.context;\n    if (status != null) {\n      if (status.role) {\n        return (\n          <div>\n            <Card\n              className=\"customCard\"\n              key={\"add\"}\n              type=\"inner\"\n              title=\"Add Class\"\n            >\n              <Form\n                onFinish={this.createClass}\n                layout=\"inline\"\n                name=\"dynamic_rule\"\n              >\n                <Form.Item\n                  name=\"className\"\n                  rules={[\n                    {\n                      required: true,\n                      message: \"Please input Class Name\",\n                    },\n                  ]}\n                >\n                  <Input\n                    className=\"infoInput\"\n                    placeholder=\"Please input Class Name\"\n                  />\n                </Form.Item>\n                <Form.Item>\n                  <Button\n                    className=\"addButton\"\n                    htmlType=\"submit\"\n                    type=\"primary\"\n                    shape=\"circle\"\n                    icon={<PlusOutlined />}\n                  />\n                </Form.Item>\n              </Form>\n            </Card>\n            Teacher\n          </div>\n        );\n      } else {\n        return <div>Student</div>;\n      }\n    }\n  };\n\n  render() {\n    const { classes } = this.state;\n    return (\n      <Layout style={{ minHeight: \"100vh\" }}>\n        <SiderBar state={this.props.location.state} />\n        <Layout className=\"site-layout\">\n          <HeaderSection />\n          <Content style={{ margin: \"0 16px\" }}>\n            <Card title=\"Classes\">\n              {\" \"}\n              {classes == undefined ? (\n                <div className=\"loader\">\n                  <Spin size=\"large\" tip=\"Loading...\" />\n                </div>\n              ) : (\n                this.renderClass(classes)\n              )}\n              {this.getRole()}\n            </Card>\n          </Content>\n          <FooterSection />\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nexport default Classes;\n","import React, { Component } from \"react\";\nimport \"./ui.css\";\nimport { addAssesment, getAssesment } from \"../utils/Firestore\";\nimport FooterSection from \"./FooterSection\";\nimport HeaderSection from \"./HeaderSection\";\nimport { Layout, Card, Spin, Button, Form, Input } from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport SideBar from \"./SideBar\";\nimport { AuthContext } from \"../utils/Auth\";\nimport { Link } from \"react-router-dom\";\nimport { v1 as uuid } from \"uuid\";\n\nconst { Content } = Layout;\n\nclass Assessment extends Component {\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      classInfo: this.props.location.state.val,\n      assessments: undefined,\n    };\n  }\n  getAllAssessment = async () => {\n    const { classInfo } = this.state;\n    const classCode = classInfo.classCode;\n    let data = await getAssesment(classCode);\n    if (data.assessments.length == 0) {\n      data = false;\n    }\n    this.setState({ assessments: data });\n  };\n  createAssessment = (value) => {\n    let { assessments, classInfo } = this.state;\n    const classCode = classInfo.classCode;\n    const roomId = uuid();\n    const assessmentObj = value.assessmentName;\n    addAssesment(classCode, assessmentObj, roomId);\n    if (assessments == false) {\n      assessments = { assessments: [{ assessmentObj, roomId }] };\n    } else {\n      assessments.assessments.push({ assessmentObj, roomId });\n    }\n    this.setState({ assessments });\n  };\n  renderAssessments = () => {\n    const { assessments, classInfo } = this.state;\n    const { status } = this.context;\n    const classCode = classInfo.classCode;\n    if (assessments == false) return <h2>No Assessments</h2>;\n    const socketId = assessments.sockedId;\n\n    return assessments.assessments.map((val, idx) => {\n      const { assessmentObj, roomId } = val;\n      return (\n        <Card\n          className=\"customCard\"\n          key={idx}\n          type=\"inner\"\n          title={assessmentObj}\n          extra={\n            socketId != undefined || status.role == true ? (\n              <Link\n                to={{\n                  pathname: `/room/${roomId}/${status.role}/${classCode}/${socketId}`,\n                }}\n              >\n                Join Assessment Room\n              </Link>\n            ) : (\n              <Link disabled>{socketId}Assessment Not Open</Link>\n            )\n          }\n        >\n          {assessmentObj}\n        </Card>\n      );\n    });\n  };\n\n  getRole = () => {\n    const { status } = this.context;\n    if (status != null) {\n      if (status.role) {\n        return (\n          <div>\n            {\" \"}\n            <Card\n              className=\"customCard\"\n              key={\"add\"}\n              type=\"inner\"\n              title=\"Add Assessment\"\n            >\n              <Form\n                onFinish={this.createAssessment}\n                layout=\"inline\"\n                name=\"dynamic_rule\"\n              >\n                <Form.Item\n                  name=\"assessmentName\"\n                  rules={[\n                    {\n                      required: true,\n                      message: \"Please input Assessment Name\",\n                    },\n                  ]}\n                >\n                  <Input\n                    className=\"infoInput\"\n                    placeholder=\"Please input Assessment Name\"\n                  />\n                </Form.Item>\n                <Form.Item>\n                  <Button\n                    className=\"addButton\"\n                    htmlType=\"submit\"\n                    type=\"primary\"\n                    shape=\"circle\"\n                    icon={<PlusOutlined />}\n                  />\n                </Form.Item>\n              </Form>\n            </Card>\n            Teacher\n          </div>\n        );\n      } else {\n        return <div>Student</div>;\n      }\n    }\n  };\n  componentDidMount() {\n    this.getAllAssessment();\n  }\n  render() {\n    const { assessments } = this.state;\n    return (\n      <Layout style={{ minHeight: \"100vh\" }}>\n        <SideBar state={this.props.location.state.collapse} />\n        <Layout className=\"site-layout\">\n          <HeaderSection />\n          <Content style={{ margin: \"0 16px\" }}>\n            <Card title=\"Classes\">\n              {assessments == undefined ? (\n                <div className=\"loader\">\n                  <Spin size=\"large\" tip=\"Loading...\" />\n                </div>\n              ) : (\n                this.renderAssessments()\n              )}\n              {this.getRole()}\n            </Card>\n          </Content>\n          <FooterSection />\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nexport default Assessment;\n","function kumarHassebrook(a, b) {\r\n  var ii = a.length;\r\n  var p = 0;\r\n  var p2 = 0;\r\n  var q2 = 0;\r\n  for (var i = 0; i < ii; i++) {\r\n    p += a[i] * b[i];\r\n    p2 += a[i] * a[i];\r\n    q2 += b[i] * b[i];\r\n  }\r\n  return p / (p2 + q2 - p);\r\n}\r\n\r\nfunction mean(a) {\r\n  let total = a.reduce((acc, val) => (acc += val), 0);\r\n  return total / a.length;\r\n}\r\nfunction pearson(a, b) {\r\n  var avgA = mean(a);\r\n  var avgB = mean(b);\r\n\r\n  var newA = new Array(a.length);\r\n  var newB = new Array(b.length);\r\n  for (var i = 0; i < newA.length; i++) {\r\n    newA[i] = a[i] - avgA;\r\n    newB[i] = b[i] - avgB;\r\n  }\r\n\r\n  return kumarHassebrook(newA, newB);\r\n}\r\nconst cosineSimilar = (A, B) => {\r\n  var dotproduct = 0;\r\n  var mA = 0;\r\n  var mB = 0;\r\n  for (let i = 0; i < A.length; i++) {\r\n    dotproduct += A[i] * B[i];\r\n    mA += A[i] * A[i];\r\n    mB += B[i] * B[i];\r\n  }\r\n  mA = Math.sqrt(mA);\r\n  mB = Math.sqrt(mB);\r\n  var similarity = dotproduct / (mA * mB);\r\n  return similarity;\r\n};\r\n\r\nexport default pearson;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"simple-peer\";\r\nimport styled from \"styled-components\";\r\nimport { addTeacherSocket } from \"../utils/Firestore\";\r\nimport pearson from \"../utils/algoritims\";\r\nimport { Card, Badge } from \"antd\";\r\nimport \"./room.css\";\r\nconst Container = styled.div`\r\n  padding: 20px;\r\n  display: flex;\r\n  height: 100vh;\r\n  width: 90%;\r\n  margin: auto;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst Video = (props) => {\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    props.peer.peer.on(\"stream\", (stream) => {\r\n      ref.current.srcObject = stream;\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <Card\r\n      size=\"small\"\r\n      title={<p id={\"d\" + props.id}></p>}\r\n      extra={<p id={props.id}></p>}\r\n      style={{ width: vid.width, height: vid.height }}\r\n    >\r\n      <video\r\n        width={vid.width}\r\n        height={vid.height}\r\n        playsInline\r\n        autoPlay\r\n        ref={ref}\r\n      ></video>\r\n    </Card>\r\n  );\r\n};\r\n\r\nlet vid = {\r\n  height: window.innerHeight / 1,\r\n  width: window.innerWidth / 1,\r\n};\r\n\r\nconst Room = (props) => {\r\n  const [peers, setPeers] = useState([]);\r\n  let oldImage = [];\r\n  const socketRef = useRef();\r\n  const userVideo = useRef();\r\n  const peersRef = useRef([]);\r\n  const roomID = props.match.params.roomID;\r\n  const role = props.match.params.role;\r\n  const code = props.match.params.code;\r\n  const socketId = props.match.params.socketId;\r\n  let counter = 1;\r\n  const endPoint = {\r\n    local: \"http://localhost:8000/\",\r\n    prod: \"https://isugapi.herokuapp.com/\",\r\n  };\r\n  useEffect(() => {\r\n    socketRef.current = io.connect(endPoint.prod);\r\n    navigator.mediaDevices\r\n      .getDisplayMedia({\r\n        video: {\r\n          width: 1280,\r\n          height: 720,\r\n          frameRate: {\r\n            ideal: 10,\r\n            max: 15,\r\n          },\r\n        },\r\n        cursor: true,\r\n        mimeType: \"video/webm; codecs=vp9\",\r\n      })\r\n      .then((stream) => {\r\n        userVideo.current.srcObject = stream;\r\n\r\n        if (role == \"false\") {\r\n          const canvas = document.getElementById(\"canvas\");\r\n          const ctx = canvas.getContext(\"2d\");\r\n          requestAnimationFrame(async function loop() {\r\n            await new Promise((r) => setTimeout(r, 3000));\r\n            ctx.drawImage(userVideo.current, 0, 0, 16, 12);\r\n            const imageData = ctx.getImageData(\r\n              0,\r\n              0,\r\n              canvas.width,\r\n              canvas.height\r\n            );\r\n            const data = imageData.data;\r\n            const result = pearson(data, oldImage);\r\n\r\n            const date = new Date().getTime();\r\n            socketRef.current.emit(\"sendMsg\", {\r\n              data: result,\r\n              id: socketId,\r\n              myId: socketRef.current.id,\r\n              time: date,\r\n              name: \"name\",\r\n            });\r\n            console.log(result);\r\n            oldImage = data;\r\n            requestAnimationFrame(loop);\r\n          });\r\n        }\r\n\r\n        socketRef.current.emit(\"join room\", roomID);\r\n\r\n        if (role == \"true\") {\r\n          addSocket(socketRef.current.id);\r\n        }\r\n        socketRef.current.on(\"all users\", (users) => {\r\n          const peers = [];\r\n\r\n          users.forEach((userID) => {\r\n            if (socketId == userID) {\r\n              const peer = createPeer(userID, socketRef.current.id, stream);\r\n              peersRef.current.push({\r\n                peerID: userID,\r\n                peer,\r\n              });\r\n              peers.push({ peer, id: userID });\r\n            }\r\n          });\r\n          setPeers(peers);\r\n        });\r\n        socketRef.current.on(\"cheater\", (payload) => {\r\n          let data = document.getElementById(payload.myId);\r\n\r\n          let count = document.getElementById(\"d\" + payload.myId);\r\n          data.innerText = \"Name: \" + payload.myId;\r\n          console.log(count);\r\n          if (typeof payload.data === \"number\") {\r\n            const percent = parseInt(Math.abs(payload.data * 100 - 100));\r\n            let isCheating = \"\";\r\n            if (percent >= 75) {\r\n              isCheating = '<div class=\"blink_me\">Cheating !</div>';\r\n            }\r\n            count.innerHTML = `<p>Cheating %: ${percent}  ${isCheating}<p>`;\r\n          }\r\n        });\r\n\r\n        socketRef.current.on(\"user joined\", (payload) => {\r\n          const peer = addPeer(payload.signal, payload.callerID, stream);\r\n          peersRef.current.push({\r\n            peerID: payload.callerID,\r\n            peer,\r\n          });\r\n          counter++;\r\n          vid = {\r\n            height: window.innerHeight / counter,\r\n            width: window.innerWidth / counter,\r\n          };\r\n\r\n          setPeers((users) => [...users, { peer, id: payload.callerID }]);\r\n        });\r\n\r\n        socketRef.current.on(\"receiving returned signal\", (payload) => {\r\n          const item = peersRef.current.find((p) => p.peerID === payload.id);\r\n          console.log(item);\r\n          item.peer.signal(payload.signal);\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  const addSocket = (id) => {\r\n    addTeacherSocket(id, code);\r\n  };\r\n\r\n  function createPeer(userToSignal, callerID, stream) {\r\n    console.log(stream);\r\n    const peer = new Peer({\r\n      initiator: true,\r\n      trickle: false,\r\n      stream,\r\n    });\r\n\r\n    peer.on(\"signal\", (signal) => {\r\n      console.log(signal);\r\n      socketRef.current.emit(\"sending signal\", {\r\n        userToSignal,\r\n        callerID,\r\n        signal,\r\n      });\r\n    });\r\n\r\n    return peer;\r\n  }\r\n\r\n  function addPeer(incomingSignal, callerID, stream) {\r\n    console.log(stream);\r\n    const peer = new Peer({\r\n      initiator: false,\r\n      trickle: false,\r\n      stream,\r\n    });\r\n\r\n    peer.on(\"signal\", (signal) => {\r\n      console.log(signal);\r\n      socketRef.current.emit(\"returning signal\", { signal, callerID });\r\n    });\r\n\r\n    peer.signal(incomingSignal);\r\n\r\n    return peer;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <canvas id=\"canvas\" width=\"16\" height=\"12\"></canvas>\r\n      <video\r\n        width={vid.width}\r\n        height={vid.height}\r\n        playsInline\r\n        autoPlay\r\n        ref={userVideo}\r\n      ></video>\r\n      {role == \"true\"\r\n        ? peers.map((peer, index) => {\r\n            return <Video key={index} id={peer.id} peer={peer} />;\r\n          })\r\n        : \"\"}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport \"./room.css\";\r\nimport Sketch from \"react-p5\";\r\n\r\nconst Whiteboard = (props) => {\r\n  const [color, setColor] = useState(\"#000000\");\r\n  const [weight, setWeight] = useState(3);\r\n  const socketRef = useRef();\r\n  const roomID = props.match.params.roomID;\r\n  const role = props.match.params.role;\r\n  const endPoint = {\r\n    local: \"http://localhost:8000/\",\r\n    prod: \"https://isugapi.herokuapp.com/\",\r\n  };\r\n  let p = null;\r\n\r\n  const setup = (p5, parent) => {\r\n    socketRef.current = io.connect(endPoint.prod);\r\n    socketRef.current.on(\"sendCoord\", (coord) => {\r\n      if (roomID == coord.room) {\r\n        const { x, y, px, py } = coord.data;\r\n        const { c, w, widthSize, heighthSize } = coord.settings;\r\n        let x1 = p5.map(x, 0, widthSize, 0, window.innerWidth);\r\n        let y1 = p5.map(\r\n          y,\r\n          0,\r\n          heighthSize,\r\n          0,\r\n          window.innerHeight - window.innerHeight / 18\r\n        );\r\n        let x2 = p5.map(px, 0, widthSize, 0, window.innerWidth);\r\n        let y2 = p5.map(\r\n          py,\r\n          0,\r\n          heighthSize,\r\n          0,\r\n          window.innerHeight - window.innerHeight / 18\r\n        );\r\n        p5.stroke(c);\r\n        p5.strokeWeight(w);\r\n        p5.line(x1, y1, x2, y2);\r\n      }\r\n    });\r\n    const canvas = p5\r\n      .createCanvas(\r\n        window.innerWidth,\r\n        window.innerHeight - window.innerHeight / 18\r\n      )\r\n      .parent(parent);\r\n    if (role == \"true\") {\r\n      canvas.addClass(\"drawTeacherCanvas\");\r\n    } else {\r\n      canvas.addClass(\"drawStudentCanvas\");\r\n    }\r\n    p = p5;\r\n    p5.background(240);\r\n  };\r\n  const clear = () => {\r\n    p.background(240);\r\n  };\r\n\r\n  function mouseDragged(p5) {\r\n    p5.stroke(color);\r\n    p5.strokeWeight(weight);\r\n    connection(p5.mouseX, p5.mouseY, p5.pmouseX, p5.pmouseY);\r\n    p5.line(p5.mouseX, p5.mouseY, p5.pmouseX, p5.pmouseY);\r\n    p = p5;\r\n  }\r\n\r\n  const connection = (x, y, px, py) => {\r\n    socketRef.current.emit(\"coord\", {\r\n      data: { x, y, px, py },\r\n\r\n      settings: {\r\n        c: color,\r\n        w: weight,\r\n        widthSize: window.innerWidth,\r\n        heighthSize: window.innerHeight - window.innerHeight / 18,\r\n      },\r\n      room: roomID,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {role == \"true\" ? (\r\n        <div>\r\n          {\" \"}\r\n          <div className=\"optionToDraw\">\r\n            <label>Color:</label>\r\n            <button onClick={clear}>Clear Screen</button>\r\n            <input\r\n              type=\"color\"\r\n              value={color}\r\n              onChange={(e) => setColor(e.target.value)}\r\n            />\r\n            <input\r\n              type=\"number\"\r\n              min={1}\r\n              max={100}\r\n              value={weight}\r\n              onChange={(e) => setWeight(e.target.value)}\r\n            />\r\n          </div>\r\n          <Sketch setup={setup} mouseDragged={mouseDragged} />\r\n        </div>\r\n      ) : (\r\n        <Sketch setup={setup} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Whiteboard;\r\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport \"antd/dist/antd.css\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Login from \"./Login\";\nimport Main from \"./Main\";\nimport AuthProvider from \"../utils/Auth\";\nimport SelectRole from \"./SelectRole\";\nimport PrivateRoute from \"../utils/PrivateRoute\";\nimport ExtraInfo from \"./ExtraInfo\";\nimport Classes from \"./Classes\";\nimport Assessment from \"./Assessment\";\nimport Room from \"./room\";\nimport Whiteboard from \"./whiteboard\";\nclass App extends Component {\n  state = {};\n  render() {\n    return (\n      <Router>\n        <AuthProvider>\n          <PrivateRoute exact path=\"/\" component={Home} />\n          <PrivateRoute exact path=\"/classes\" component={Classes} />\n          <PrivateRoute\n            path=\"/room/:roomID/:role/:code/:socketId\"\n            component={Room}\n          />\n          <PrivateRoute exact path=\"/assessment\" component={Assessment} />\n          <PrivateRoute\n            exact\n            path=\"/whiteboard/:roomID/:role\"\n            component={Whiteboard}\n          />\n          <Route exact path=\"/login\" component={Login} />\n          <Route exact path=\"/main\" component={Main} />\n          <Route exact path=\"/selectrole\" component={SelectRole} />\n          <Route exact path=\"/extrainfo\" component={ExtraInfo} />\n        </AuthProvider>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}