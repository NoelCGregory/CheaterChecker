{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Noel\\\\Desktop\\\\Javascript\\\\Node.js\\\\CheaterChecker\\\\frontend\\\\src\\\\utils\\\\Auth.js\";\nimport React, { Component } from \"react\";\nimport { app } from \"./base\";\nimport \"antd/dist/antd.css\";\nimport { Spin } from \"antd\";\nimport { checkUserExist, getUserRole } from \"./Firestore\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/React.createContext();\n\nclass AuthProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentUser: null,\n      loader: true,\n      status: null,\n      sendUser: false\n    };\n    this.style = {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      height: \"75vh\"\n    };\n\n    this.checkUser = async () => {\n      let {\n        currentUser,\n        sendUser\n      } = this.state;\n      const {\n        history\n      } = this.props;\n\n      if (currentUser != null && sendUser == false) {\n        let res = await checkUserExist(currentUser.uid);\n        let temp = \"\";\n\n        if (res) {\n          temp = \"/selectrole\";\n        } else {\n          temp = \"/\";\n        }\n\n        sendUser = true;\n        history.push(temp);\n        this.setState({\n          currentUser,\n          sendUser\n        });\n      }\n    };\n\n    this.getRole = async () => {\n      const {\n        currentUser,\n        status\n      } = this.state;\n\n      if (currentUser != null && status == null) {\n        const data = await getUserRole(currentUser.uid);\n        this.setState({\n          status: data\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    app.auth().onAuthStateChanged(user => {\n      this.setState({\n        currentUser: user,\n        loader: false\n      });\n\n      if (user != null) {\n        this.checkUser();\n      }\n    });\n  }\n\n  componentDidUpdate() {\n    this.checkUser();\n    this.getRole();\n  }\n\n  componentDidMount() {\n    this.checkUser();\n    this.getRole();\n  }\n\n  render() {\n    const {\n      currentUser,\n      loader,\n      status\n    } = this.state;\n\n    if (loader) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: this.style,\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          size: \"large\",\n          tip: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n        value: {\n          currentUser,\n          status\n        },\n        children: this.props.children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nexport default _c = withRouter(AuthProvider); // export const AuthProvider = ({ children }) => {\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [pending, setPending] = useState(true);\n//   useEffect(() => {\n//     app.auth().onAuthStateChanged((user) => {\n//       setCurrentUser(user);\n//       setPending(false);\n//     });\n//   }, []);\n//   if (pending) {\n//     return <>Loading...</>;\n//   }\n//   return (\n//     <AuthContext.Provider\n//       value={{\n//         currentUser,\n//       }}\n//     >\n//       {children}\n//     </AuthContext.Provider>\n//   );\n// };\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/Users/Noel/Desktop/Javascript/Node.js/CheaterChecker/frontend/src/utils/Auth.js"],"names":["React","Component","app","Spin","checkUserExist","getUserRole","Redirect","withRouter","AuthContext","createContext","AuthProvider","state","currentUser","loader","status","sendUser","style","display","justifyContent","alignItems","height","checkUser","history","props","res","uid","temp","push","setState","getRole","data","componentDidMount","auth","onAuthStateChanged","user","componentDidUpdate","render","children"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { app } from \"./base\";\nimport \"antd/dist/antd.css\";\nimport { Spin } from \"antd\";\nimport { checkUserExist, getUserRole } from \"./Firestore\";\nimport { Redirect, withRouter } from \"react-router-dom\";\n\nexport const AuthContext = React.createContext();\n\nclass AuthProvider extends Component {\n  state = {\n    currentUser: null,\n    loader: true,\n    status: null,\n    sendUser: false,\n  };\n  style = {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    height: \"75vh\",\n  };\n\n  componentDidMount() {\n    app.auth().onAuthStateChanged((user) => {\n      this.setState({ currentUser: user, loader: false });\n      if (user != null) {\n        this.checkUser();\n      }\n    });\n  }\n  checkUser = async () => {\n    let { currentUser, sendUser } = this.state;\n    const { history } = this.props;\n    if (currentUser != null && sendUser == false) {\n      let res = await checkUserExist(currentUser.uid);\n      let temp = \"\";\n      if (res) {\n        temp = \"/selectrole\";\n      } else {\n        temp = \"/\";\n      }\n      sendUser = true;\n      history.push(temp);\n      this.setState({ currentUser, sendUser });\n    }\n  };\n\n  getRole = async () => {\n    const { currentUser, status } = this.state;\n    if (currentUser != null && status == null) {\n      const data = await getUserRole(currentUser.uid);\n      this.setState({ status: data });\n    }\n  };\n  componentDidUpdate() {\n    this.checkUser();\n    this.getRole();\n  }\n  componentDidMount() {\n    this.checkUser();\n    this.getRole();\n  }\n  render() {\n    const { currentUser, loader, status } = this.state;\n    if (loader) {\n      return (\n        <div style={this.style}>\n          <Spin size=\"large\" tip=\"Loading...\" />\n        </div>\n      );\n    } else {\n      return (\n        <AuthContext.Provider value={{ currentUser, status }}>\n          {this.props.children}\n        </AuthContext.Provider>\n      );\n    }\n  }\n}\n\nexport default withRouter(AuthProvider);\n// export const AuthProvider = ({ children }) => {\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [pending, setPending] = useState(true);\n\n//   useEffect(() => {\n//     app.auth().onAuthStateChanged((user) => {\n//       setCurrentUser(user);\n//       setPending(false);\n//     });\n//   }, []);\n\n//   if (pending) {\n//     return <>Loading...</>;\n//   }\n\n//   return (\n//     <AuthContext.Provider\n//       value={{\n//         currentUser,\n//       }}\n//     >\n//       {children}\n//     </AuthContext.Provider>\n//   );\n// };\n"]},"metadata":{},"sourceType":"module"}